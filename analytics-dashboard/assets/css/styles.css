/* === Light Lite Theme + Inter === */
:root{
  --bg:#efefef;
  --bg-header: #fcfcfc;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#6b7280;
  --border:#e5e7eb;
  --shadow:0 2px 12px rgba(15,23,42,.06);
  --blue:#4272D8;
  --blue-dark:#4E5370;
  --green:#B8D64D;
  --grid-gap:16px;
  --gap-lg:16px;
  --gap-xl:20px;
  --gap-md:12px;
  --gap-sm:8px;
  --gap-xs:4px;

}
html,body{margin: 0; padding: 0; font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Apple Color Emoji","Segoe UI Emoji";}
body{background:var(--bg);color:var(--text); position: relative;}
h1,h2,h3{margin:0}
h1{font-size:22px;font-weight:800}
h2{font-size:18px;font-weight:800}
h3{font-size:12px;letter-spacing:.04em;color:var(--muted);font-weight:700;   text-transform: uppercase;}


/* Header */
.page-header{display:flex;justify-content:space-between;
  align-items:center;gap:16px;padding:var(--gap-lg) var(--gap-lg);
  border-bottom:1px solid var(--border);background:var(--bg-header);
 position: sticky;
        top: 0; /* This is crucial for defining where the element sticks */
        z-index: 1000; /* Ensure it stays above other content */}
.title-container h1{margin:0;font-size:16px;font-weight:800; text-transform: uppercase;}
.banner h2{margin:0;font-size:20px;font-weight:700;}
header.page-header .left{display:flex;gap:var(--gap-sm);    flex-direction: column;
    align-items: flex-start;}
header.page-header .left .week-context .week-line {
  display: flex; flex-direction: column;
align-items: flex-start;
gap: var(--gap-xs);
}
 header.page-header .left .week-context .week-line .week-select-wrapper select.week-select {

    padding: 0;
    border: none;
    border-radius: 0;
    background-color: transparent;
    font-size: 1.3rem;
    }
header.page-header .left .week-context .week-line .status {
font-size: 0.7rem;
}
header.page-header .header-center {
display: flex; flex-direction: column;
gap: var(--gap-sm); align-items: stretch;
}
header.page-header .header-center .banner h2 {
font-size: 1.1rem;
display: none;
}
header.page-header .header-center .version label {
font-size: 0.7rem;
    color: var(--muted);
}
header.page-header .header-center .version select{
font-size: 1rem;
}

header.page-header .header-tiles{display:flex;gap:var(--gap-sm);}



/* Containers/rows (flex everywhere) */
.container{max-width:1360px;margin:0 auto;padding: var(--gap-lg);}
.container{padding:var(--gap-lg) var(--gap-lg) 0 var(--gap-lg);}
.section-title {font-weight: 900; width: 100%; border-top: 2px solid gray; padding-top: var(--gap-sm);}
.row{display:flex;flex-direction:column;gap: var(--gap-sm);margin-bottom:var(--gap-sm); }
.row.row-2, .row.row-3 {margin-bottom: 0}
.row.row-2 .three-up {max-height: 164px; }

.row.row-2 .three-up .card:nth-child(2) .small {margin-bottom: var(--gap-sm);}
.row.row-2 .three-up .card:nth-child(2) .small .title {
  font-size: 12px;
  font-weight: normal;
}
.row.row-2 .three-up .card:nth-child(2) .small .total {
  font-size: 16px;
  font-weight: 800;
}

/* Row 4 layout safety (keeps cards side-by-side using flex) */
.row.row-4 {
  display: flex;
  gap: var(--gap-sm);
  align-items: stretch;
}
.row.row-4 .grid.cols-2.promotions .card.chart-card { 
    flex-grow: 1;
}
/* Heatmap card (fixed size & scroll) */
.heatmap-card .card-body{padding:0;overflow:auto}
.heatmap-img{width:100%;display:block}
.heatmap-card {
  width: 370px;
  min-height: 600px;
  max-height: 680px;
  display: flex;
  flex-direction: column;
}

.heatmap-card .card-body.heatmap-body {
  flex: 1 1 auto;
  overflow-y: auto;
  overflow-x: hidden;
      margin-bottom: 10px;
}

.heatmap-img {
  width: 100%;
  height: auto;
  display: block;
}
.grid{display:flex;gap:var(--gap-sm)}

.grid.cols-1 > .col, .grid.cols-2 > .col, .grid.cols-3 > .col, .grid.cols-4 > .col{flex:1}


/* Cards */
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);}
.card-head{display: flex; flex-direction: row;     justify-content: space-between;
    align-items: center; padding:var(--gap-sm) var(--gap-lg);border-bottom:1px solid var(--border);}
.card-body{padding:var(--gap-lg);}
.card.trend .card-body, .card.lift .card-body{padding:0 var(--gap-lg);}

/* KPI tiles */
.card.kpi{width:150px}
.card.kpi .big{font-size:36px;font-weight:800}
.card.kpi .small{font-size:16px;font-weight:800}
.subtext{color:var(--muted);font-size:12px}

/* Chart hosts need a guaranteed height */
.chart-host{width:100%;height:220px}

/* Rank block */
.rank .rank-row{display:flex;gap:var(--gap-sm);align-items:center;font-size:14px}
.rank .pos{color:var(--green);font-weight:700}
.rank .neg{color:#d14343;font-weight:700}

/* Bars list (Promotion Performance) */
.bars{display:flex;flex-direction:column;gap:12px}
.bar{display:flex;align-items:center;gap:12px}
.bar .thumb{width:72px;height:48px;object-fit:cover;border-radius:8px}
.bar .label{flex:1 1 auto;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size: 1rem; max-width: 250px;}
.bar .meter {flex-grow: 1;}
.microbar{width:100%}
.microbar-shell{width:100%;height:16px;background:#f0f0f0;border-radius:999px;overflow:hidden}
.microbar-fill{height:100%;background:var(--blue);border-radius:999px}
/* Animate promotion microbars */
.bars .microbar-fill {
  transition: width 400ms ease, background-color 250ms ease;
  will-change: width;
}
/* Promotion Performance color by mode */
#promotion-performance.mode-composite .microbar-fill { background: var(--blue); }
#promotion-performance.mode-percentile .microbar-fill { background: var(--green); }
.val{width:48px;text-align:right;font-weight:700; padding: 0 var(--gap-sm); font-size: 1.4rem;}
button.toggle-btn {
  padding: 10px 20px;
  border-radius: 5px;
  cursor: pointer;
  font-size: 16px;
  text-decoration: none; /* Remove underline for anchor tags */
  display: inline-flex;
  align-items: center;
  gap: var(--gap-md);
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
  background-color: transparent; /* Often no background fill */
  color: #333; /* A darker text color for contrast */
  border: 1px solid #ccc; /* A subtle border */
}
button.toggle-btn span.swatch.s-upmid {background: var(--green);}
button.toggle-btn span.swatch.s-top{background: var(--blue);}
button.toggle-btn.is-active {
    box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3); /* Default box shadow */
  transition: box-shadow 0.2s ease-in-out; /* Smooth transition for the shadow */

}

/* Hover state for secondary button */
button.toggle-btn:hover {
  background-color: #f0f0f0; /* Light background on hover */
  border-color: #999; /* Slightly darker border on hover */
}

/* Optional: Disabled state for secondary button */
button.toggle-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}



/* Mini stack for Promotion Position Performance */
.stack-legend{display:flex;flex-direction:column;gap:6px}
.stack-row{display:flex;align-items:center;gap:8px;font-size:12px}
.swatch{width:10px;height:10px;border-radius:10px;display:inline-block}
.s-top{background:var(--blue)}
.s-upmid{background:#5cc8a1}
.s-lomid{background:#e0a955}
.s-bottom{background:#e05555}
.stack-row .pct{margin-left:auto;color:var(--muted);font-weight:700}
/* Deal Type HBAR tile: wrapper fills card-body and scrolls if needed */
.col.deal-type {display: flex;}
.col.deal-type .card.small {    flex-grow: 1;   display: flex; align-items: stretch; flex-direction: column;}

.col.deal-type .card.small > :nth-child(2) {
      flex-grow: 1;
    }
.col.deal-type .card.small .dealtype-wrap {height: 100%;
  flex: 1 1 auto;          /* fill the tile body */
  overflow-y: auto;           /* scroll if there are many deal types */ }
.col.deal-type .card.small .dealtype-wrap .chart-host {
  width: 100%;
  height: 100%;
}
/* Tighter category labels for many rows */
#dealtype-bars .echarts-axis-label {
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}



/* Slightly smaller y-axis font on tight widths to avoid crunching */
@media (max-width: 900px) {
  .deal-type .card-body .dealtype-wrap .chart-host .ecs-axis-label { 
    font-size: 12px;
  }
}

/* Simple utility widths for 3-up row */
.three-up{display:flex;gap:var(--gap-sm)}
.three-up > .card{flex:1}

/* Small KPI blocks row (sharing) */
.slim-kpis{display:flex;gap:var(--gap-sm)}
.slim-kpis .card{flex:1}
.slim-kpis .big{font-size:22px}

/* Donut legend text color fix */
.echarts-legend{color:var(--muted)}